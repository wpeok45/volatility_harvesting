# Volatility harvesting (floating percent)

![alt text](pnl.png)

# installation
pip install -r requirements.txt

# prepare to run

# run
python3 vh_float.py

Сбор волатильности на самом деле не сложная стратегия, но требующая переоценки
отношения к движению цен на рынке.

Она основывается на двух условиях:
1. Вероятность движения цены вверх или вниз за n времени, всегда равна "подбросу монетки" или 50/50.
    - мы намерено игнорируем все другие условия, считая их внешними ( например политическая обстановка, новости или манипуляции рынком)
    - обьем рынка BTC и количество участников настолько огромно, что любое внешнее влияние неизбежно будет сбалансировано в той или иной мере.
2. Экстремальные колебания цены( например 60k$, 16k$, 100k$) происходят в приемлемом временном диапазоне.
    - это значит что периоды падения и подьема не длятся десятилетиями

Bitcoin хорошо соответствует этим условиям.

Что если бы мы покупали BTC обьемом 1$ за каждый пункт цены начиная от 10к до 60к, по мере её повышения.
Мы бы заплатили 50000$ по средней цене 35к$ и были бы в хорошей прибыли. Это стандартная HODL стратегия.
По мере снижения цены до 16к портфель понесет убытки.

Что если мы внесем небольшую коррекцию в HODL и будем продавать наш каждый купленый BTC(1$) если его цена увеличится на 10%.
Это будет стандартная стратегия greed DCA

Теперь попробуем покупать больше чем BTC(1$) и продавать меньше чем BTC(1$), по мере снижения цены и наоборот - покупать меньше и продавать больше
по мере повышения цены. Это будет близко к стратегии DVA или VA

Следует учесть что DCA и DVA считаются инвестиционными стратегиями. Тоесть попросту это способ входа на рынок, с помощью него постоянно увеличивают содержание
BTC в портфеле через определенные периоды или через диапазоны изменения цены (например "по сетке")

Очевидно что BTC при этом "залеживается на складе", говоря терминологией обычного магазина розничной торговли.
Наша цель продать всё что мы покупали, с прибылью и как можно скорей и эффективней, как в swing trading.
Но хотелось бы чтобы работало "всё само по себе", без утомительного теханализа и чтения новостей.
Нужна какая то универсальная формула, полностью соблюдающая математические вероятности.

Формула балансировки портфеля с нулевым риском:
```
if BTC price = 0.01$ then portfel balance ratio = 100% (BTC) / 0% (USDT)
if BTC price = ATH then portfel balance ratio = 0% (BTC) / 100% (USDT)
```
Ребаланс портфеля: 
- продажу BTC проводим на приемлемом изменении процента, не менее 2% (если fee = 0.1)
- sell or buy делаем на разворотах цены, например по пересечению EMA24 и MA24
- чтобы избежать ложного разворота проверяем локальный диапазон цены например за 2 часа.

Если мы хотим рискнуть для повышения прибыли, то можем ограничить диапазон на половину:
```
if BTC price = ATH/2 $ then portfel balance ratio = 100% (BTC) / 0% (USDT)
if BTC price = ATH then portfel balance ratio = 0% (BTC) / 100% (USDT)
```

Универсальней этой формулы трудно что-то себе представить.
Похоже что эффективные трейдеры и крупные фонды придерживаются ее в подавляющем большинстве случаев.
Даже intraday трейдеры на коротких диапазонах, скорее всего интуитивно следуют этой формуле.

Не является финансовым советом. Используйте на свой страх и риск.

